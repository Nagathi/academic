<div class="page" *ngIf="aula">

  <div class="top">
    <h1 class="titulo">
      <label *ngIf="!editandoTitulo">{{ aula.titulo }}</label>
      <input *ngIf="editandoTitulo" [(ngModel)]="aula.titulo" class="titulo-input" (keydown.enter)="salvarTitulo()" (keydown.escape)="cancelarTitulo()" autofocus>
      <button class="edit" (click)="editarTitulo()">
        <i class="material-icons">edit</i>
      </button>
    </h1>

    <p class="descricao">
      <label *ngIf="!editandoDescricao">{{ aula.descricao }}</label>
      <input *ngIf="editandoDescricao" [(ngModel)]="aula.descricao" class="descricao-input" (keydown.enter)="salvarDescricao()" (keydown.escape)="cancelarDescricao()" autofocus>
      <button class="edit small" (click)="editarDescricao()">
        <i class="material-icons">edit</i>
      </button>
    </p>
  </div>

  <div class="linha"></div>

  <div class="card">

    <div class="secao">
      <div class="secao-header">
        <h2>Materiais</h2>
      </div>

      <ul class="lista">
        <li *ngFor="let m of materiais">
          {{ m.titulo }}
          <button class="edit small" (click)="editarConteudo(m)">
            <i class="material-icons">edit</i>
          </button>
        </li>
      </ul>

      <button class="add" (click)="abrirSeletor()">+ Adicionar material</button>

      <input type="file" #fileInput style="display:none" (change)="arquivoSelecionado($event)">
      <div class="edit-arquivo">
        <input type="text" [(ngModel)]="tituloArquivo" placeholder="Título do arquivo..." *ngIf="adicionandoArquivo" class="titulo-arquivo">
        <input type="text" [(ngModel)]="descricaoArquivo" placeholder="Descreva o conteúdo..." *ngIf="adicionandoArquivo" class="descricao-arquivo"> 
      </div>
      <div *ngIf="arquivo">
        <span>{{ arquivo.name }}</span>
        <button (click)="enviarArquivo()">Enviar</button>
        <button (click)="cancelarArquivo()">Cancelar</button>
      </div>
    </div>

    <div class="secao">
      <div class="secao-header">
        <h2>Links</h2>
      </div>

      <ul class="lista">
        <li *ngFor="let l of links">
          {{ l.url }}
          <button class="edit small" (click)="editarConteudo(l)">
            <i class="material-icons">edit</i>
          </button>
        </li>
      </ul>

      <button class="add" (click)="adicionarLink()">+ Adicionar link</button>
    </div>

  </div>
</div>
